<filePopup>:
    id: my_widget
    FileChooserListView:
        id: filechooser
        on_selection: my_widget.selected(filechooser.selection)
    Image:
        id: image
        source: ""

<colorPopup>:
    FloatLayout:
        orientation: 'vertical'
        pos: (167,160)
        size:250,100
        canvas:
            Color:
                rgba: (0, 0, 0, 1)
            Rectangle:
                pos: (160, 160)
                size: (480, 240)

        ColorPicker:
            id: colorpicker
            size_hint: 1.0, 1.0
            pos: 160, 160
            on_color: root.get_picked(colorpicker.color)
            color: root.set_color(colorpicker.color)

        BoxLayout:
            orientation: 'vertical'
            pos: (160,160)
            size:250,100

            canvas:
                Color:
                    rgba: (0, 0, 0, 1)
                Rectangle:
                    pos: (160, 160)
                    size: (237, 120)
<TextInputPopup>:
    TextInput:
        text: ''
        pos: (213, 258)
        size_hint: (1, 0.65)

    Button:
        text: 'Save'
        pos: (230, 218)
        size_hint: (0.2, 0.2)

    Button:
        text: 'Cancel'
        pos: (495, 218)
        size_hint: (0.2, 0.2)

<MyMain>:

    Background:
        canvas:
            Color:
                rgb: ([1, 1, 1])
            Rectangle:
                pos: (0, 0)
                size: (800, 450)
        Image:
            source: root.fileImage('')
            center_x: self.parent.center_x
            center_y: self.parent.center_y



    Test:
        background_color: (4, 4, 4, 1) #Color of tab
        size: (800, 150)
        pos: (0, 450)
        tab_height: 25
        tab_width: 50
        do_default_tab: False

        TabbedPanelItem:
            text: 'Home'
            StripLayout:
                background_color: (4, 4, 4, 1)

                BoxLayout:
                    orientation: 'vertical'
                    pos: (-130,470)
                    size:250,100

                    ColorPicker:
                        id: colorpicker
                        size_hint: 1.0, 1.0
                        on_color: root.color_picked(colorpicker.color)
                        color: root.set_color(colorpicker.color)
                Label:
                    color: (0, 0, 0, 1)
                    text: 'Colors'
                    pos: (10, 410)
                    font_size: 12
                Button:
                    id: clr_button
                    text: ''
                    size: (40, 40)
                    pos: (288, 510)
                    color:0,0,0,0
                    on_press: root.colorbtn()

                Label:
                    pos: (263, 445)
                    color: (0, 0, 0, 1)
                    text: 'Current Color'
                    font_size: 12
                Button:
                    id: brush_button
                    text: ''
                    size: (40, 40)
                    pos: (380, 510)
                    background_color: (1, 2, 2, 1)
                    Image:
                        id: brush_button_image
                        source: 'resources/pencil.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                Label:
                    color: (0, 0, 0, 1)
                    pos: (352, 445)
                    text: 'Brush'
                    font_size: 12.5
                Button:
                    text: ''
                    size: (25, 25)
                    pos: (460, 515)
                    on_press: root.pencil()
                    on_press: brush_button_image.source = 'resources/pencil.png'
                    Image:
                        source: 'resources/pencil.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                Button:
                    text: ''
                    size: (25, 25)
                    pos: (495, 515)
                    on_press:
                        brush_button_image.source = 'resources/bucket.png'
                    Image:
                        source: 'resources/bucket.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                Button:
                    text: ''
                    size: (25, 25)
                    pos: (565, 515)
                    on_press:
                        brush_button_image.source = 'resources/dropper.png'
                        root.dropper()
                    Image:
                        source: 'resources/dropper.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                Button:
                    text: ''
                    size: (25, 25)
                    pos: (530, 515)
                    on_press: root.eraser()
                    on_press: brush_button_image.source = 'resources/eraser.png'
                    Image:
                        source: 'resources/eraser.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                Button:
                    text: ''
                    size: (25, 25)
                    pos: (600, 515)
                    on_press:
                        brush_button_image.source = 'resources/font.png'
                        root.text()
                    Image:
                        source: 'resources/font.png'
                        size: 20,20
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                Label:
                    color: (0, 0, 0, 1)
                    pos: (494, 450)
                    text: 'Tools'
                    font_size: 12

                Button:
                    text: ''
                    size: (23, 23)
                    pos: (120, 575)
                    on_press:
                        root.export_to_png('C:/Users/peter/Desktop/screenshot.png', scale = 1)
                        print('saved screenshot to C:/Users/peter/Desktop/screenshot.png')
                    Image:
                        source: 'resources/save.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                Button:
                    text: ''
                    size: (23, 23)
                    pos: (160, 572)
                    on_press:
                        root.filebtn()
                    Image:
                        source: 'resources/add_image.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                Slider:
                    id: slideNum
                    min: 1
                    max: 100
                    value: 30
                    pos: (400, 415)
                    cursor_size: (20,20)
                    value_track_width: 1
                    sensitivity: 'handle'
                    step: 1
                    orientation: 'horizontal'
                    on_touch_move: root.slider(slideNum)

                Label:
                    color: (0, 0, 0, 1)
                    pos: (355, 415)
                    text: str(slideNum.value)
                    font_size: 12

                Label:
                    color: (0, 0, 0, 1)
                    pos: (333, 415)
                    text: 'Size:'
                    font_size: 12

                TextInput:
                    id: txt_inpt
                    text: ''
                    pos: (123, 510)
                    size: (150, 30)
                    hint_text: 'Enter text'

                Slider:
                    id: TextxVal
                    min: -50
                    max: 750
                    value: 300
                    pos: (110, 415)
                    cursor_size: (20, 20)
                    value_track_width: 1
                    sensitivity: 'handle'
                    step: 1
                    orientation: 'horizontal'
                    on_touch_move: root.slider(TextxVal)

                Label:
                    color: (0, 0, 0, 1)
                    text: 'x:'
                    pos: (70, 415)

                Slider:
                    id: TextyVal
                    min: -45
                    max: 395
                    value: 175
                    pos: (195, 415)
                    cursor_size: (20, 20)
                    value_track_width: 1
                    sensitivity: 'handle'
                    step: 1
                    orientation: 'horizontal'
                    on_touch_move: root.slider(TextyVal)

                Label:
                    color: (0, 0, 0, 1)
                    text: 'y:'
                    pos: (153, 415)

                Label:
                    id: txt_inpt_location
                    color: (0, 0, 0, 1)
                    pos: (TextxVal.value, TextyVal.value)
                    text: txt_inpt.text

                #Clear button
                Button:
                    text: 'Clear'
                    size: (75, 50)
                    pos: (650, 500)
                    on_press: root.clearbtn()


        TabbedPanelItem:
            text: 'Shape'
            StripLayout:
                background_color: (4, 4, 4, 1)
                Button:
                    text: ''
                    size: (23, 23)
                    pos: (20, 505)
                    on_press: root.circle_draw(ShapexVal.value, ShapeyVal.value, slideNumShape.value)
                    on_press: brush_button_image.source = 'resources/C.png'
                    Image:
                        source: 'resources/C.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                Button:
                    text: ''
                    size: (23, 23)
                    pos: (60, 505)
                    on_press: root.square_draw(ShapexVal.value, ShapeyVal.value, slideNumShape.value)
                    on_press: brush_button_image.source = 'resources/S.png'
                    Image:
                        source: 'resources/S.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                Button:
                    text: ''
                    size: (23, 23)
                    pos: (100, 505)
                    on_press: root.line_draw(ShapexVal.value, ShapeyVal.value, slideNumShape.value)
                    on_press: brush_button_image.source = 'resources/L.png'
                    Image:
                        source: 'resources/L.png'
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                Label:
                    pos: (23, 500)
                    text: '[color=000000]Select a Shape[/color]'
                    markup: True
                    font_size: 16

                #Position
                Slider:
                    id: ShapexVal
                    min: 1
                    max: 770
                    value: 385
                    pos: (170, 485)
                    cursor_size: (20, 20)
                    value_track_width: 1
                    sensitivity: 'handle'
                    step: 1
                    orientation: 'horizontal'
                    on_touch_move: root.slider(ShapexVal)

                Label:
                    pos: (170, 505)
                    text: '[color=000000]X-Position[/color]'
                    markup: True

                Slider:
                    id: ShapeyVal
                    min: 1
                    max: 420
                    value: 210
                    pos: (170, 430)
                    cursor_size: (20, 20)
                    value_track_width: 1
                    sensitivity: 'handle'
                    step: 1
                    orientation: 'horizontal'
                    on_touch_move: root.slider(ShapeyVal)

                Label:
                    pos: (170, 450)
                    text: '[color=000000]Y-Position[/color]'
                    markup: True

                #Size
                Slider:
                    id: slideNumShape
                    min: 1
                    max: 100
                    value: 50
                    pos: (300, 460)
                    cursor_size: (20,20)
                    value_track_width: 1
                    sensitivity: 'handle'
                    step: 1
                    orientation: 'horizontal'
                    on_touch_move: root.sliderShape(slideNumShape)

                Label:
                    pos: (300, 480)
                    text: '[color=000000]Size:[/color]'
                    markup: True

                BoxLayout: #Jacob can you edit this and remove the bars I don't need?
                    orientation: 'vertical'
                    pos: (450,460)
                    size:250,100
                    ColorPicker:
                        id: colorpickerShape
                        size_hint: 1.0, 1.0
                        on_color: root.color_picked(colorpickerShape.color)
                        color: colorpicker.color
